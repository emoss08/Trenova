# Generated by Django 4.1.7 on 2023-03-12 02:32

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("equipment", "0003_tractor_remove_equipment_equipment_type_and_more"),
        ("dispatch", "0005_alter_delaycode_code_alter_fleetcode_code_and_more"),
        ("worker", "0006_alter_worker_code_and_more"),
        ("movements", "0003_remove_movement_equipment_movement_tractor"),
        ("organization", "0006_alter_depot_name_and_more"),
    ]

    operations = [
        migrations.DeleteModel(
            name="Equipment",
        ),
        migrations.AddField(
            model_name="tractor",
            name="equipment_type",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="tractor",
                related_query_name="tractor",
                to="equipment.equipmenttype",
                verbose_name="Equipment Type",
            ),
        ),
        migrations.AddField(
            model_name="tractor",
            name="fleet",
            field=models.ForeignKey(
                help_text="Fleet of the equipment.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="tractor",
                related_query_name="tractor",
                to="dispatch.fleetcode",
                verbose_name="Fleet",
            ),
        ),
        migrations.AddField(
            model_name="tractor",
            name="manufacturer",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="tractor",
                related_query_name="tractor",
                to="equipment.equipmentmanufacturer",
                verbose_name="Manufacturer",
            ),
        ),
        migrations.AddField(
            model_name="tractor",
            name="organization",
            field=models.ForeignKey(
                help_text="Organization",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)ss",
                related_query_name="%(class)s",
                to="organization.organization",
                verbose_name="Organization",
            ),
        ),
        migrations.AddField(
            model_name="tractor",
            name="primary_worker",
            field=models.OneToOneField(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="primary_tractor",
                related_query_name="primary_tractor",
                to="worker.worker",
                verbose_name="Primary Worker",
            ),
        ),
        migrations.AddField(
            model_name="tractor",
            name="secondary_worker",
            field=models.OneToOneField(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="secondary_tractor",
                related_query_name="secondary_tractor",
                to="worker.worker",
                verbose_name="Secondary Worker",
            ),
        ),
        migrations.AddConstraint(
            model_name="tractor",
            constraint=models.UniqueConstraint(
                fields=("code", "organization"), name="unique_tractor_code_organization"
            ),
        ),
    ]
