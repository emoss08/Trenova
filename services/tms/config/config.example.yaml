# Trenova Configuration Example
# Copy this file to config.yaml and modify as needed

# Application settings
app:
  name: trenova                    # Application name
  env: development                 # Environment: development, staging, production
  debug: true                      # Enable debug mode
  version: 1.0.0                   # Application version

# HTTP Server configuration
server:
  host: 0.0.0.0                    # Server host
  port: 8080                       # Server port
  mode: debug                      # Gin mode: debug, release, test
  cors:
    enabled: true                  # Enable CORS
    allowed_origins:               # Allowed origins for CORS
      - http://localhost:5173
      - http://localhost:3000
    allowed_methods:               # Allowed HTTP methods
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH
      - OPTIONS
    allowed_headers:               # Allowed headers
      - Authorization
      - Content-Type
      - Accept
    expose_headers:                # Headers exposed to the client
      - X-Request-Id
    credentials: true              # Allow credentials
    max_age: 86400                 # Preflight cache duration in seconds

# PostgreSQL database configuration
database:
  host: localhost                  # Database host
  port: 5432                       # Database port
  name: trenova                    # Database name
  user: postgres                   # Database user
  password: postgres               # Database password
  sslmode: disable                 # SSL mode: disable, require, verify-ca, verify-full
  max_idle_conns: 10               # Maximum idle connections
  max_open_conns: 100              # Maximum open connections
  conn_max_lifetime: 3600          # Connection lifetime in seconds

# Redis cache configuration
redis:
  host: localhost                  # Redis host
  port: 6379                       # Redis port
  password: ""                     # Redis password (empty for no auth)
  db: 0                            # Redis database number
  pool_size: 10                    # Connection pool size
  min_idle_conns: 5                # Minimum idle connections
  max_retries: 3                   # Maximum retry attempts
  ttl: 3600                        # Default TTL in seconds

# Kafka message broker configuration
kafka:
  brokers:                         # Kafka broker addresses
    - localhost:9092
  consumer_group: trenova-group    # Consumer group ID
  topics:                          # Topic names
    shipments: trenova-shipments
    documents: trenova-documents
    notifications: trenova-notifications
    audit: trenova-audit

# Object storage configuration (MinIO/S3)
storage:
  provider: minio                  # Storage provider: minio, s3, local
  endpoint: localhost:9000         # Storage endpoint (MinIO/S3)
  accessKey: minioadmin            # Storage access key
  secretKey: minioadmin            # Storage secret key
  sessionToken: ""                 # Session token (optional, for S3)
  region: us-east-1                # Region (for S3)
  bucket: trenova-documents        # Default bucket name
  useSSL: false                    # Use SSL for storage connection (false for local MinIO)

# Temporal workflow configuration
temporal:
  host: localhost                  # Temporal host
  port: 7233                       # Temporal port
  namespace: default               # Temporal namespace
  task_queue: trenova-queue        # Task queue name

# Email configuration
email:
  from: noreply@trenova.io         # From email address
  smtp:
    host: localhost                # SMTP host
    port: 1025                     # SMTP port
    username: ""                   # SMTP username
    password: ""                   # SMTP password
    use_tls: false                 # Use TLS for SMTP

# Security configuration
security:
  session:
    secret: your-secret-key-change-in-production  # Session secret (min 32 chars)
    name: trenova_session          # Cookie name for session
    max_age: 86400                 # Session max age in seconds (24 hours)
    http_only: true                # HttpOnly flag for cookies
    secure: false                  # Secure flag (true for HTTPS only)
    same_site: lax                 # SameSite policy: strict, lax, none
    domain: ""                     # Cookie domain (empty = current domain)
    path: "/"                      # Cookie path
    token_name: csrf_token         # Name for CSRF token in session
    refresh_window: 3600           # Refresh if expires within window (seconds)
  api_key:
    header: X-API-Key              # API key header name
  rate_limit:
    enabled: true                  # Enable rate limiting
    requests_per_minute: 60        # Requests per minute per IP

# Logging configuration
logging:
  level: debug                     # Log level: debug, info, warn, error
  format: json                     # Log format: json, text
  output: stdout                   # Log output: stdout, file
  file:
    path: logs/trenova.log         # Log file path
    max_size: 100                  # Maximum file size in MB
    max_age: 30                    # Maximum file age in days
    max_backups: 10                # Maximum number of backups

# Monitoring configuration
monitoring:
  prometheus:
    enabled: true                  # Enable Prometheus metrics
    port: 9090                     # Prometheus metrics port
    path: /metrics                 # Metrics endpoint path
  opentelemetry:
    enabled: false                 # Enable OpenTelemetry
    endpoint: localhost:4317       # OpenTelemetry collector endpoint
    service_name: trenova-api      # Service name for tracing