import { AccessorialChargeMethod } from "@/types/billing";
import { InferType, mixed, number, object, string } from "yup";
import { accessorialChargeSchema } from "./accessorial-charge-schema";

export const additionalChargeSchema = object({
  id: string().optional(),
  organizationId: string().nullable().optional(),
  businessUnitId: string().nullable().optional(),
  shipmentId: string().optional(), // ! This is generated by the system on create, so cannot be required
  accessorialChargeId: string().required("Accessorial Charge is required"),
  accessorialCharge: accessorialChargeSchema.optional(),
  unit: number()
    .min(1, "Unit must be greater than 0")
    .required("Unit is required"),
  method: mixed<AccessorialChargeMethod>()
    .required("Method is required")
    .oneOf(Object.values(AccessorialChargeMethod)),
  amount: number().required("Amount is required"),
  formId: string().optional(), // * Simply becuase react-hook-form will override the id if there is nothing for it to append to.
});

export type AdditionalChargeSchema = InferType<typeof additionalChargeSchema>;
