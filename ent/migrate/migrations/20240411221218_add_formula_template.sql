-- Create "formula_templates" table
CREATE TABLE "formula_templates" ("id" uuid NOT NULL, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "version" bigint NOT NULL DEFAULT 1, "name" character varying NOT NULL, "formula_text" text NOT NULL, "description" text NULL, "template_type" character varying NOT NULL DEFAULT 'General', "auto_apply" boolean NOT NULL DEFAULT false, "business_unit_id" uuid NOT NULL, "organization_id" uuid NOT NULL, "customer_id" uuid NULL, "shipment_type_id" uuid NULL, PRIMARY KEY ("id"), CONSTRAINT "formula_templates_business_units_business_unit" FOREIGN KEY ("business_unit_id") REFERENCES "business_units" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "formula_templates_customers_customer" FOREIGN KEY ("customer_id") REFERENCES "customers" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "formula_templates_organizations_organization" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "formula_templates_shipment_types_shipment_type" FOREIGN KEY ("shipment_type_id") REFERENCES "shipment_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
