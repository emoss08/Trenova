# Generated by Django 4.1.5 on 2023-01-28 03:46

import uuid

import django.db.models.deletion
import django_extensions.db.fields
from django.db import migrations, models

import utils.models


class Migration(migrations.Migration):

    dependencies = [
        ("organization", "0004_alter_organization_name"),
        ("billing", "0009_remove_billinghistory_batch_name_and_more"),
    ]

    operations = [
        migrations.AddField(
            model_name="billinghistory",
            name="bol_number",
            field=models.CharField(
                default=1,
                help_text="BOL Number",
                max_length=255,
                verbose_name="BOL Number",
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name="billinghistory",
            name="invoice_number",
            field=models.CharField(
                blank=True,
                help_text="Invoice number for the billing history",
                max_length=50,
                verbose_name="Invoice Number",
            ),
        ),
        migrations.AddField(
            model_name="billinghistory",
            name="is_cancelled",
            field=models.BooleanField(
                default=False,
                help_text="Is the invoice cancelled.",
                verbose_name="Is Cancelled",
            ),
        ),
        migrations.AddField(
            model_name="billinghistory",
            name="is_summary",
            field=models.BooleanField(
                default=False,
                help_text="Is the invoice going to be a summary bill.",
                verbose_name="Is Summary",
            ),
        ),
        migrations.AddField(
            model_name="billingqueue",
            name="ready_to_bill",
            field=models.BooleanField(
                default=False,
                help_text="Order is ready to be billed to customer.",
                verbose_name="Ready to bill",
            ),
        ),
        migrations.CreateModel(
            name="BillingControl",
            fields=[
                (
                    "created",
                    django_extensions.db.fields.CreationDateTimeField(
                        auto_now_add=True, verbose_name="created"
                    ),
                ),
                (
                    "modified",
                    django_extensions.db.fields.ModificationDateTimeField(
                        auto_now=True, verbose_name="modified"
                    ),
                ),
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                        unique=True,
                    ),
                ),
                (
                    "remove_billing_history",
                    models.BooleanField(
                        default=False,
                        help_text="Whether users can remove records from billing history.",
                        verbose_name="Remove Billing History",
                    ),
                ),
                (
                    "auto_bill_order",
                    models.BooleanField(
                        default=False,
                        help_text="Whether to automatically bill orders directly to customer",
                        verbose_name="Auto Bill Orders",
                    ),
                ),
                (
                    "auto_bill_criteria",
                    utils.models.ChoiceField(
                        blank=True,
                        choices=[
                            ("ORDER_DELIVERY", "Auto Bill when order is delivered"),
                            (
                                "TRANSFERRED_TO_BILL",
                                "Auto Bill when order are transferred to billing",
                            ),
                            (
                                "MARKED_READY",
                                "Auto Bill when order is marked ready to bill in Billing Queue",
                            ),
                        ],
                        default="MARKED_READY",
                        help_text="Define a criteria on when auto billing is to occur.",
                        max_length=19,
                        verbose_name="Auto Bill Criteria",
                    ),
                ),
                (
                    "organization",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="billing_control",
                        to="organization.organization",
                        verbose_name="Organization",
                    ),
                ),
            ],
            options={
                "verbose_name": "Billing Control",
                "verbose_name_plural": "Billing Controls",
            },
        ),
    ]
