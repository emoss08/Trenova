-- Create "shipments" table
CREATE TABLE "shipments" ("id" uuid NOT NULL, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "version" bigint NOT NULL DEFAULT 1, "pro_number" character varying(20) NOT NULL, "status" character varying NOT NULL, "origin_address_line" character varying NULL, "origin_appointment_start" timestamptz NULL, "origin_appointment_end" timestamptz NULL, "destination_address_line" character varying NULL, "destination_appointment_start" timestamptz NULL, "destination_appointment_end" timestamptz NULL, "rating_unit" bigint NOT NULL DEFAULT 1, "mileage" double precision NULL, "other_charge_amount" double precision NULL, "freight_charge_amount" double precision NULL, "rating_method" character varying NOT NULL DEFAULT 'FlatRate', "pieces" double precision NULL, "weight" double precision NULL, "ready_to_bill" boolean NOT NULL DEFAULT false, "bill_date" date NULL, "ship_date" date NULL, "billed" boolean NOT NULL DEFAULT false, "transferred_to_billing" boolean NOT NULL DEFAULT false, "transferred_to_billing_date" date NULL, "total_charge_amount" double precision NULL, "temperature_min" bigint NULL, "temperature_max" bigint NULL, "bill_of_lading_number" character varying NULL, "consignee_reference_number" character varying NULL, "comment" text NULL, "voided_comment" character varying(100) NULL, "auto_rated" boolean NOT NULL DEFAULT false, "current_suffix" character varying NULL, "entry_method" character varying NOT NULL DEFAULT 'Manual', "is_hazardous" boolean NOT NULL DEFAULT false, "business_unit_id" uuid NOT NULL, "organization_id" uuid NOT NULL, "shipment_type_id" uuid NOT NULL, "service_type_id" uuid NULL, "revenue_code_id" uuid NULL, "origin_location_id" uuid NULL, "destination_location_id" uuid NULL, "customer_id" uuid NOT NULL, "trailer_type_id" uuid NULL, "tractor_type_id" uuid NULL, "created_by" uuid NULL, PRIMARY KEY ("id"), CONSTRAINT "shipments_business_units_business_unit" FOREIGN KEY ("business_unit_id") REFERENCES "business_units" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_customers_customer" FOREIGN KEY ("customer_id") REFERENCES "customers" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_equipment_types_tractor_type" FOREIGN KEY ("tractor_type_id") REFERENCES "equipment_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_equipment_types_trailer_type" FOREIGN KEY ("trailer_type_id") REFERENCES "equipment_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_locations_destination_location" FOREIGN KEY ("destination_location_id") REFERENCES "locations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_locations_origin_location" FOREIGN KEY ("origin_location_id") REFERENCES "locations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_organizations_organization" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_service_types_revenue_code" FOREIGN KEY ("revenue_code_id") REFERENCES "service_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_service_types_service_type" FOREIGN KEY ("service_type_id") REFERENCES "service_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_shipment_types_shipment_type" FOREIGN KEY ("shipment_type_id") REFERENCES "shipment_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "shipments_users_created_by_user" FOREIGN KEY ("created_by") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create index "shipment_bill_date_organization_id" to table: "shipments"
CREATE INDEX "shipment_bill_date_organization_id" ON "shipments" ("bill_date", "organization_id");
-- Create index "shipment_bill_of_lading_number_organization_id" to table: "shipments"
CREATE INDEX "shipment_bill_of_lading_number_organization_id" ON "shipments" ("bill_of_lading_number", "organization_id");
-- Create index "shipment_pro_number_organization_id" to table: "shipments"
CREATE UNIQUE INDEX "shipment_pro_number_organization_id" ON "shipments" ("pro_number", "organization_id");
-- Create index "shipment_ship_date_organization_id" to table: "shipments"
CREATE INDEX "shipment_ship_date_organization_id" ON "shipments" ("ship_date", "organization_id");
-- Create index "shipment_status" to table: "shipments"
CREATE INDEX "shipment_status" ON "shipments" ("status");
-- Set comment to table: "shipments"
COMMENT ON TABLE "shipments" IS 'Shipment holds the schema definition for the Shipment entity.';
-- Set comment to column: "rating_unit" on table: "shipments"
COMMENT ON COLUMN "shipments" ."rating_unit" IS 'The rating unit for the shipment.';
-- Set comment to column: "voided_comment" on table: "shipments"
COMMENT ON COLUMN "shipments" ."voided_comment" IS 'The comment for voiding the shipment.';
-- Set comment to column: "auto_rated" on table: "shipments"
COMMENT ON COLUMN "shipments" ."auto_rated" IS 'Indicates if the shipment was auto rated.';
-- Set comment to column: "is_hazardous" on table: "shipments"
COMMENT ON COLUMN "shipments" ."is_hazardous" IS 'Indicates if the shipment is hazardous.';
