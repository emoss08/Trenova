-- Create "trailers" table
CREATE TABLE "trailers" ("id" uuid NOT NULL, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "version" bigint NOT NULL DEFAULT 1, "code" character varying(50) NOT NULL, "status" character varying(13) NOT NULL DEFAULT 'Available', "vin" character varying(17) NULL, "model" character varying(50) NULL, "year" smallint NULL, "license_plate_number" character varying(50) NULL, "last_inspection_date" date NULL, "registration_number" character varying NULL, "registration_expiration_date" date NULL, "business_unit_id" uuid NOT NULL, "organization_id" uuid NOT NULL, "equipment_type_id" uuid NULL, "equipment_manufacturer_id" uuid NULL, "state_id" uuid NULL, "registration_state_id" uuid NULL, "fleet_code_id" uuid NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "trailers_business_units_business_unit" FOREIGN KEY ("business_unit_id") REFERENCES "business_units" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_equipment_manufactuers_equipment_manufacturer" FOREIGN KEY ("equipment_manufacturer_id") REFERENCES "equipment_manufactuers" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_equipment_types_equipment_type" FOREIGN KEY ("equipment_type_id") REFERENCES "equipment_types" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_fleet_codes_fleet_code" FOREIGN KEY ("fleet_code_id") REFERENCES "fleet_codes" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_organizations_organization" FOREIGN KEY ("organization_id") REFERENCES "organizations" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_us_states_registration_state" FOREIGN KEY ("registration_state_id") REFERENCES "us_states" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "trailers_us_states_state" FOREIGN KEY ("state_id") REFERENCES "us_states" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create index "trailer_code_organization_id" to table: "trailers"
CREATE UNIQUE INDEX "trailer_code_organization_id" ON "trailers" ("code", "organization_id");
